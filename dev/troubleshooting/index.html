<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Troubleshooting · Express.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://MineralsCloud.github.io/Express.jl/troubleshooting/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Express.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Express.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../develop/">Development</a></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox"/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">Running</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../run/configuration/">Configuration files</a></li><li><a class="tocitem" href="../run/cli/">How to run <code>Express</code> from command line</a></li><li><a class="tocitem" href="../run/jobs/">Tracking and monitoring jobs in a workflow</a></li></ul></li></ul></li><li class="is-active"><a class="tocitem" href>Troubleshooting</a><ul class="internal"><li><a class="tocitem" href="#Installation-problems"><span>Installation problems</span></a></li><li><a class="tocitem" href="#Loading-settings"><span>Loading settings</span></a></li><li><a class="tocitem" href="#Loading-Express"><span>Loading <code>Express</code></span></a></li><li><a class="tocitem" href="#Running-workflows"><span>Running workflows</span></a></li><li><a class="tocitem" href="#Miscellaneous-errors"><span>Miscellaneous errors</span></a></li></ul></li><li><a class="tocitem" href="../questions/">Other questions</a></li><li><span class="tocitem">API by module</span><ul><li><a class="tocitem" href="../api/EquationOfStateWorkflow/"><code>EquationOfStateWorkflow</code> module</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Troubleshooting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Troubleshooting</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/MineralsCloud/Express.jl/blob/master/docs/src/troubleshooting.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Troubleshooting"><a class="docs-heading-anchor" href="#Troubleshooting">Troubleshooting</a><a id="Troubleshooting-1"></a><a class="docs-heading-anchor-permalink" href="#Troubleshooting" title="Permalink"></a></h1><p>This page collects some possible errors you may encounter and trick how to fix them.</p><p><em>If you have additional tips, please submit a PR with suggestions.</em></p><h2 id="Installation-problems"><a class="docs-heading-anchor" href="#Installation-problems">Installation problems</a><a id="Installation-problems-1"></a><a class="docs-heading-anchor-permalink" href="#Installation-problems" title="Permalink"></a></h2><h3 id="Cannot-find-the-Julia-executable"><a class="docs-heading-anchor" href="#Cannot-find-the-Julia-executable">Cannot find the Julia executable</a><a id="Cannot-find-the-Julia-executable-1"></a><a class="docs-heading-anchor-permalink" href="#Cannot-find-the-Julia-executable" title="Permalink"></a></h3><p>Make sure you have Julia installed in your environment. Please download the latest <a href="https://julialang.org/downloads/#current_stable_release">stable version</a> for your platform. If you are using macOS, the recommended way is to use <a href="https://brew.sh">Homebrew</a>. If you do not want to install Homebrew or you are using other platforms that Julia supports, download the corresponding binaries. And then create a symbolic link <code>/usr/local/bin/julia</code> to the Julia executable. If <code>/usr/local/bin/</code> is not in your <code>$PATH</code>, export it to your <code>$PATH</code>. Some clusters, like <a href="https://confluence.columbia.edu/confluence/display/rcs/Habanero+HPC+Cluster+User+Documentation"><code>Habanero</code></a>, <a href="https://www.sdsc.edu/support/user_guides/comet.html"><code>Comet</code></a>, or <a href="https://www.sdsc.edu/services/hpc/expanse/index.html"><code>Expanse</code></a>, already have Julia installed as a module, you may just <code>module load julia</code> to use it. If not, either install by yourself or contact your administrator.</p><h3 id="Have-trouble-installing-[qha](https://github.com/MineralsCloud/qha)"><a class="docs-heading-anchor" href="#Have-trouble-installing-[qha](https://github.com/MineralsCloud/qha)">Have trouble installing <a href="https://github.com/MineralsCloud/qha"><code>qha</code></a></a><a id="Have-trouble-installing-[qha](https://github.com/MineralsCloud/qha)-1"></a><a class="docs-heading-anchor-permalink" href="#Have-trouble-installing-[qha](https://github.com/MineralsCloud/qha)" title="Permalink"></a></h3><p>If you are seeing error message like this:</p><pre><code class="nohighlight hljs">ERROR: LoadError: InitError: PyError (PyImport_ImportModule

The Python package qha could not be imported by pyimport. Usually this means
that you did not install qha in the Python version being used by PyCall.

PyCall is currently configured to use the Python version at:

/usr/bin/python3

and you should use whatever mechanism you usually use (apt-get, pip, conda,
etcetera) to install the Python package containing the qha module.</code></pre><p>It is because on some operating systems, <code>python</code> is already installed, and Julia selects it as the default binary. But that <code>python</code> cannot install third-party Python packages. So <a href="https://github.com/MineralsCloud/qha"><code>qha</code></a> cannot be automatically installed by Julia.</p><p>One solution is to re-configure <a href="https://github.com/JuliaPy/PyCall.jl"><code>PyCall</code></a> to use a different Python version on your system: set <code>ENV[&quot;PYTHON&quot;]</code> to the path of the python executable you want to use, run <code>Pkg.build(&quot;PyCall&quot;)</code>, and re-launch Julia. For example, in Julia REPL, run</p><pre><code class="language-julia-repl hljs">julia&gt; using Pkg

julia&gt; ENV[&quot;PYTHON&quot;] = &quot;... path of the python executable ...&quot;
# ENV[&quot;PYTHON&quot;] = raw&quot;C:\Python37-x64\python.exe&quot; # example for Windows, &quot;raw&quot; to not have to escape: &quot;C:\\Python37-x64\\python.exe&quot;
# ENV[&quot;PYTHON&quot;] = &quot;/usr/bin/python3.7&quot;            # example for *nix

julia&gt; Pkg.build(&quot;PyCall&quot;);</code></pre><p>Please see <a href="https://github.com/JuliaPy/PyCall.jl#specifying-the-python-version">this part</a> for more detailed instructions.</p><p>Another solution is to configure <code>PyCall</code> to use a Julia-specific Python distribution via the <a href="https://github.com/JuliaPy/Conda.jl"><code>Conda.jl</code> package</a> (which installs a private Anaconda Python distribution), which has the advantage that packages can be installed and kept up-to-date via Julia. As explained in the <code>PyCall</code> documentation, in Julia, run</p><pre><code class="language-julia-repl hljs">julia&gt; using Pkg

julia&gt; ENV[&quot;PYTHON&quot;] = &quot;&quot; # empty string

julia&gt; Pkg.build(&quot;PyCall&quot;);</code></pre><p>Then re-launch Julia.</p><p>If <code>qha</code> still cannot be installed, go to the Python binary directory you specified (for the second solution, go to <a href="https://docs.julialang.org/en/v1/manual/environment-variables/#JULIA_DEPOT_PATH"><code>$JULIA_DEPOT_PATH/conda/3/bin</code></a>) and run the following command</p><pre><code class="language-shell hljs">$ ./pip install qha</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>At least Python 3.6 and above is required to install qha. Please read its <a href="https://mineralscloud.github.io/qha/tutorials/installing.html">manual</a> for more information.</p></div></div><h2 id="Loading-settings"><a class="docs-heading-anchor" href="#Loading-settings">Loading settings</a><a id="Loading-settings-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-settings" title="Permalink"></a></h2><h3 id="Error-parsing-YAML-files"><a class="docs-heading-anchor" href="#Error-parsing-YAML-files">Error parsing <code>YAML</code> files</a><a id="Error-parsing-YAML-files-1"></a><a class="docs-heading-anchor-permalink" href="#Error-parsing-YAML-files" title="Permalink"></a></h3><p>If you encounter</p><pre><code class="nohighlight hljs">ERROR: expected &#39;&lt;document start&gt;&#39; but found YAML.BlockMappingStartToken at nothing</code></pre><p>or</p><pre><code class="nohighlight hljs">ERROR: while scanning a simple key at line n, column 0: could not find expected &#39;:&#39; at line n+1, column 0</code></pre><p>Check whether you have no space between the <code>YAML</code> key and its value like <code>key:1</code> or <code>key:some text</code>, etc. To correct, change to <code>key: 1</code>, <code>key: some text</code>, etc. Otherwise, check other <code>YAML</code> syntax you may have broken.</p><h2 id="Loading-Express"><a class="docs-heading-anchor" href="#Loading-Express">Loading <code>Express</code></a><a id="Loading-Express-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-Express" title="Permalink"></a></h2><h3 id="Why-is-Julia-compiling/loading-modules-so-slow?-What-can-I-do?"><a class="docs-heading-anchor" href="#Why-is-Julia-compiling/loading-modules-so-slow?-What-can-I-do?">Why is Julia compiling/loading modules so slow? What can I do?</a><a id="Why-is-Julia-compiling/loading-modules-so-slow?-What-can-I-do?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-is-Julia-compiling/loading-modules-so-slow?-What-can-I-do?" title="Permalink"></a></h3><p>First, we recommend you download the latest version of Julia. Usually, the newest version has the best performance.</p><p>If you just want Julia to do a simple task and only once, you could start Julia REPL with</p><pre><code class="language-shell hljs">$ julia --compile=min</code></pre><p>to minimize compilation or</p><pre><code class="language-shell hljs">$ julia --optimize=0</code></pre><p>to minimize optimizations, or just use both. Or you could make a system image and run with</p><pre><code class="language-shell hljs">$ julia --sysimage custom-image.so</code></pre><p>See <a href="https://youtu.be/IuwxE3m0_QQ?t=313">Fredrik Ekre&#39;s talk</a> for details.</p><h2 id="Running-workflows"><a class="docs-heading-anchor" href="#Running-workflows">Running workflows</a><a id="Running-workflows-1"></a><a class="docs-heading-anchor-permalink" href="#Running-workflows" title="Permalink"></a></h2><h3 id="How-to-solve-the-error-come-across-ProcessFailedException?"><a class="docs-heading-anchor" href="#How-to-solve-the-error-come-across-ProcessFailedException?">How to solve the error <code>come across ProcessFailedException</code>?</a><a id="How-to-solve-the-error-come-across-ProcessFailedException?-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-solve-the-error-come-across-ProcessFailedException?" title="Permalink"></a></h3><p>The reasons for this error are manifold. One common reason is that express did not find the executables of Quantum ESPRESSO or <code>mpiexec</code> (e.g., their parent directory is not in the <code>PATH</code> environment variable) or the template input files. If so, please specify the paths to these executables in the absolute path format:</p><pre><code class="language-yaml hljs">cli:
  mpi:
    np: 64
    path: /usr/local/bin/gcc-10.2.0/openmpi/bin/mpiexec
  pw:
    path: /usr/local/bin/gcc-9.2.0/qe-6.5/bin/pw.x
  ph:
    path: /usr/local/bin/gcc-9.2.0/qe-6.5/bin/ph.x
  q2r:
    path: /usr/local/bin/gcc-9.2.0/qe-6.5/bin/q2r.x
  matdyn:
    path: /usr/local/bin/gcc-9.2.0/qe-6.5/bin/matdyn.x
template:
  scf: /home/qe/template.in
  dfpt: /home/qe/ph.in
  q2r: /home/qe/q2r.in
  disp: /home/qe/phdos.in</code></pre><p>Besides, the paths to the directories in the template files could also be absolute to avoid unexpected errors:</p><pre><code class="language-fortran hljs">&amp;CONTROL
  verbosity = &#39;high&#39;
  tstress = .true.
  tprnfor = .true.
  outdir = &#39;/home/qe/temp&#39;
  prefix = &#39;Ge&#39;
  disk_io = &#39;high&#39;
  pseudo_dir = &#39;/home/qe/pseudo&#39;
/</code></pre><h3 id="How-to-solve-error-EOFError:-read-end-of-file?"><a class="docs-heading-anchor" href="#How-to-solve-error-EOFError:-read-end-of-file?">How to solve error <code>EOFError: read end of file</code>?</a><a id="How-to-solve-error-EOFError:-read-end-of-file?-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-solve-error-EOFError:-read-end-of-file?" title="Permalink"></a></h3><p>If it happens when you run</p><pre><code class="language-julia hljs">wf = buildworkflow(&quot;workflow.yaml&quot;)
run!(wf)</code></pre><p>Check the value of the key <code>status</code> in the <code>save</code> dictionary in <code>workflow.yaml</code>:</p><pre><code class="language-yaml hljs">save:
  status: status.jls</code></pre><p>Then delete the file <code>status.jls</code> and retry running <code>run!(wf)</code>.</p><h3 id="Why-does-buildworkflow-return-the-same-Workflow-object-if-I-am-starting-a-new-workflow?"><a class="docs-heading-anchor" href="#Why-does-buildworkflow-return-the-same-Workflow-object-if-I-am-starting-a-new-workflow?">Why does <code>buildworkflow</code> return the same <code>Workflow</code> object if I am starting a new workflow?</a><a id="Why-does-buildworkflow-return-the-same-Workflow-object-if-I-am-starting-a-new-workflow?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-does-buildworkflow-return-the-same-Workflow-object-if-I-am-starting-a-new-workflow?" title="Permalink"></a></h3><p>This happens when running a workflow (say, a phonon workflow, for example) followed by a workflow (an equation of state workflow in this case). And after the following Julia commands:</p><pre><code class="language-julia hljs">using Express.PhononWorkflow.Recipes
using QuantumESPRESSOExpress

wf = buildworkflow(&quot;phonon.yaml&quot;)</code></pre><p>you find that <code>wf</code> still contains the jobs from the previous workflow, and they are probably all succeeded (because that is when you want to run the next workflow). The cause is likely in your configuration file (<code>phonon.yaml</code>). You probably have the following setting:</p><pre><code class="language-yaml hljs">save:
  status: status.jls</code></pre><p>where the <code>status.jls</code> already exists and is the serialized <code>Workflow</code> object saved from the previous (equation of state) workflow. <code>Express.jl</code> will first load this file if it exists. To fix this, change the value of the <code>status</code> key to another path.</p><h3 id="How-to-solve-the-LoadError:-Only-one-AND-undecorated-format-string-is-allowed?"><a class="docs-heading-anchor" href="#How-to-solve-the-LoadError:-Only-one-AND-undecorated-format-string-is-allowed?">How to solve the <code>LoadError: Only one AND undecorated format string is allowed</code>?</a><a id="How-to-solve-the-LoadError:-Only-one-AND-undecorated-format-string-is-allowed?-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-solve-the-LoadError:-Only-one-AND-undecorated-format-string-is-allowed?" title="Permalink"></a></h3><p>The probable reason for the error is that you changed the values of <code>files.dirs.pattern</code>, <code>files.pattern.input</code>, and <code>files.pattern.output</code> in the configuration file (their default values are <code>&quot;p=%.1f&quot;</code>, <code>&quot;%s.in&quot;</code>, and <code>&quot;%s.out&quot;</code>) to some strings with more than one <a href="https://www.tutorialspoint.com/format-specifiers-in-c">C-style format specifiers</a> (such as <code>&quot;p=%d%d&quot;</code>).</p><h2 id="Miscellaneous-errors"><a class="docs-heading-anchor" href="#Miscellaneous-errors">Miscellaneous errors</a><a id="Miscellaneous-errors-1"></a><a class="docs-heading-anchor-permalink" href="#Miscellaneous-errors" title="Permalink"></a></h2><ol><li><p>If you see the following error message</p><pre><code class="language-julia-repl hljs">julia&gt; w = buildworkflow(&quot;eos.toml&quot;);
ERROR: MethodError: Cannot `convert` an object of type Dict{String, Any} to an object of type AbInitioSoftwareBase.Commands.CommandConfig
Closest candidates are:
  convert(::Type{T}, ::Intervals.AnchoredInterval{P, T}) where {P, T} at ~/.julia/packages/Intervals/ua9cq/src/anchoredinterval.jl:181
  convert(::Type{T}, ::Intervals.Interval{T}) where T at ~/.julia/packages/Intervals/ua9cq/src/interval.jl:253
  convert(::Type{T}, ::P) where {T, P&lt;:(Polynomials.AbstractPolynomial{T})} at ~/.julia/packages/Polynomials/WvTSC/src/common.jl:434
  ...</code></pre><p>Then you probably forget loading a plugin package for <code>Express.jl</code>. For example, you should run</p><pre><code class="language-julia-repl hljs">julia&gt; using QuantumESPRESSOExpress</code></pre><p>to fix this error.</p></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../run/jobs/">« Tracking and monitoring jobs in a workflow</a><a class="docs-footer-nextpage" href="../questions/">Other questions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Thursday 7 July 2022 23:16">Thursday 7 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
